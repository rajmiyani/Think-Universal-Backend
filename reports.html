<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Doctor Report Panel</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <style>
    body { background-color: #f8f9fa; }
    .card-summary { border-left: 5px solid #007bff; }
    .table th, .table td { vertical-align: middle; }
  </style>
</head>
<body>
  <div class="container-fluid py-4">
    <h3 class="mb-4">Doctor Report Panel</h3>

    <!-- Filters -->
    <div class="row mb-4 g-3">
      <div class="col-md-3">
        <label for="startDate" class="form-label">Start Date</label>
        <input type="date" id="startDate" class="form-control" />
      </div>
      <div class="col-md-3">
        <label for="endDate" class="form-label">End Date</label>
        <input type="date" id="endDate" class="form-control" />
      </div>
      <div class="col-md-3">
        <label for="doctorSelect" class="form-label">Doctor</label>
        <select class="form-select" id="doctorSelect">
          <option value="">All Doctors</option>
          <option value="Dr. Smith">Dr. Smith</option>
          <option value="Dr. John">Dr. John</option>
        </select>
      </div>
      <div class="col-md-3">
        <label for="statusSelect" class="form-label">Appointment Status</label>
        <select class="form-select" id="statusSelect">
          <option value="">All Status</option>
          <option value="Completed">Completed</option>
          <option value="Cancelled">Cancelled</option>
          <option value="Upcoming">Upcoming</option>
        </select>
      </div>
    </div>

    <!-- Table -->
    <div class="card shadow-sm">
      <div class="card-header bg-primary text-white">Appointment Report</div>
      <div class="card-body p-0">
        <div class="table-responsive">
          <table class="table table-striped table-hover mb-0" id="reportTable">
            <thead class="table-light">
              <tr>
                <th>#</th>
                <th>Date</th>
                <th>Doctor</th>
                <th>Patient</th>
                <th>Status</th>
                <th>Fees</th>
                <th>Report</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>1</td>
                <td>2025-06-12</td>
                <td>Dr. Smith</td>
                <td>John Doe</td>
                <td><span class="badge bg-success">Completed</span></td>
                <td>₹500</td>
                <td><button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#reportModal">Add/View</button></td>
              </tr>
              <tr>
                <td>2</td>
                <td>2025-06-11</td>
                <td>Dr. John</td>
                <td>Jane Roe</td>
                <td><span class="badge bg-danger">Cancelled</span></td>
                <td>₹0</td>
                <td><button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#reportModal">Add/View</button></td>
              </tr>
              <tr>
                <td>3</td>
                <td>2025-06-13</td>
                <td>Dr. Smith</td>
                <td>Adam Blake</td>
                <td><span class="badge bg-warning text-dark">Upcoming</span></td>
                <td>₹700</td>
                <td><button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#reportModal">Add/View</button></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- Report Upload Modal -->
  <div class="modal fade" id="reportModal" tabindex="-1" aria-labelledby="reportModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <form>
          <div class="modal-header">
            <h5 class="modal-title" id="reportModalLabel">Patient Report</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="mb-3">
              <label for="reportFile" class="form-label">Upload Report (PDF, JPG, PNG)</label>
              <input type="file" class="form-control" id="reportFile" accept=".pdf,.jpg,.jpeg,.png" />
            </div>
            <div class="mb-3">
              <label for="reportNote" class="form-label">Doctor's Note</label>
              <textarea class="form-control" id="reportNote" rows="4" placeholder="Add description or diagnosis..."></textarea>
            </div>
            <div class="mt-3">
              <p><strong>Previous Report:</strong> <a href="#" target="_blank">View Report.pdf</a></p>
            </div>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-primary">Save Report</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS + Custom Filter Logic -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const table = document.getElementById("reportTable").getElementsByTagName("tbody")[0];
    const startDate = document.getElementById("startDate");
    const endDate = document.getElementById("endDate");
    const doctorSelect = document.getElementById("doctorSelect");
    const statusSelect = document.getElementById("statusSelect");

    [startDate, endDate, doctorSelect, statusSelect].forEach(input => {
      input.addEventListener("change", filterTable);
    });

    function filterTable() {
      const rows = table.getElementsByTagName("tr");
      const from = startDate.value ? new Date(startDate.value) : null;
      const to = endDate.value ? new Date(endDate.value) : null;
      const doctor = doctorSelect.value.toLowerCase();
      const status = statusSelect.value.toLowerCase();

      for (let row of rows) {
        const cells = row.getElementsByTagName("td");
        const date = new Date(cells[1].innerText);
        const rowDoctor = cells[2].innerText.toLowerCase();
        const rowStatus = cells[4].innerText.toLowerCase();

        const dateMatch = (!from || date >= from) && (!to || date <= to);
        const doctorMatch = !doctor || rowDoctor.includes(doctor);
        const statusMatch = !status || rowStatus.includes(status);

        row.style.display = dateMatch && doctorMatch && statusMatch ? "" : "none";
      }
    }
  </script>
</body>
</html>
